/**
 * IcedCoffeeScript Compiler v1.6.3-g
 * http://iced-coffee-script.github.io/iced-coffee-script
 *
 * Copyright 2011, Jeremy Ashkenas, Maxwell Krohn
 * Released under the MIT License
 */
!function(n){var e=function(){function n(e){return n[e]}return n["./iced"]=function(){var n={},e={exports:n};return function(){var e,t=[].slice;n.generator=e=function(n,e,r){var i,u,o,f,c,l;return e.transform=function(n,e){return n.icedTransform(e)},e["const"]=i={k:"__iced_k",k_noop:"__iced_k_noop",param:"__iced_p_",ns:"iced",runtime:"runtime",Deferrals:"Deferrals",deferrals:"__iced_deferrals",fulfill:"_fulfill",b_while:"_break",t_while:"_while",c_while:"_continue",n_while:"_next",n_arg:"__iced_next_arg",context:"context",defer_method:"defer",slot:"__slot",assign_fn:"assign_fn",autocb:"autocb",retslot:"ret",trace:"__iced_trace",passed_deferral:"__iced_passed_deferral",findDeferral:"findDeferral",lineno:"lineno",parent:"parent",filename:"filename",funcname:"funcname",catchExceptions:"catchExceptions",runtime_modes:["node","inline","window","none","browserify"],trampoline:"trampoline"},n.makeDeferReturn=function(e,r,u,o,f){var c,l,a,s;a={};for(c in o)s=o[c],a[c]=s;return a[i.lineno]=null!=r?r[i.lineno]:void 0,l=function(){var i,o,c;return i=1<=arguments.length?t.call(arguments,0):[],null!=r&&null!=(c=r.assign_fn)&&c.apply(null,i),e?(o=e,f||(e=null),o._fulfill(u,a)):n._warn("overused deferral at "+n._trace_to_string(a))},l[i.trace]=a,l},n.__c=0,n.tickCounter=function(e){return n.__c++,0===n.__c%e?(n.__c=0,!0):!1},n.__active_trace=null,n._trace_to_string=function(n){var e;return e=n[i.funcname]||"<anonymous>",""+e+" ("+n[i.filename]+":"+(n[i.lineno]+1)+")"},n._warn=function(n){return"undefined"!=typeof console&&null!==console?console.log("ICED warning: "+n):void 0},r.trampoline=function(e){return n.tickCounter(500)?"undefined"!=typeof process&&null!==process?process.nextTick(e):setTimeout(e):e()},r.Deferrals=u=function(){function e(n,e){this.trace=e,this.continuation=n,this.count=1,this.ret=null}return e.prototype._call=function(e){var t;return this.continuation?(n.__active_trace=e,t=this.continuation,this.continuation=null,t(this.ret)):n._warn("Entered dead await at "+n._trace_to_string(e))},e.prototype._fulfill=function(n,e){var t=this;return--this.count>0?void 0:r.trampoline(function(){return t._call(e)})},e.prototype.defer=function(e){var t;return this.count++,t=this,n.makeDeferReturn(t,e,null,this.trace)},e.prototype._defer=function(n){return this.defer(n)},e}(),r.findDeferral=c=function(n){var e,t,r;for(t=0,r=n.length;r>t;t++)if(e=n[t],null!=e?e[i.trace]:void 0)return e;return null},r.Rendezvous=o=function(){function e(){this.completed=[],this.waiters=[],this.defer_id=0}var t;return t=function(){function n(n,e,t){this.rv=n,this.id=e,this.multi=t}return n.prototype.defer=function(n){return this.rv._deferWithId(this.id,n,this.multi)},n}(),e.prototype.wait=function(n){var e;return this.completed.length?(e=this.completed.shift(),n(e)):this.waiters.push(n)},e.prototype.defer=function(n){var e;return e=this.defer_id++,this.deferWithId(e,n)},e.prototype.id=function(n,e){return null==e&&(e=!1),new t(this,n,e)},e.prototype._fulfill=function(n){var e;return this.waiters.length?(e=this.waiters.shift(),e(n)):this.completed.push(n)},e.prototype._deferWithId=function(e,t,r){return this.count++,n.makeDeferReturn(this,t,e,{},r)},e}(),r.stackWalk=l=function(e){var t,r,u,o;for(r=[],u=e?e[i.trace]:n.__active_trace;u;)t="   at "+n._trace_to_string(u),r.push(t),u=null!=u?null!=(o=u[i.parent])?o[i.trace]:void 0:void 0;return r},r.exceptionHandler=f=function(n,e){var t;return e||(e=console.log),e(n.stack),t=l(),t.length?(e("Iced callback trace:"),e(t.join("\n"))):void 0},r.catchExceptions=function(n){return"undefined"!=typeof process&&null!==process?process.on("uncaughtException",function(e){return f(e,n),process.exit(1)}):void 0}},n.runtime={},e(this,n,n.runtime)}.call(this),e.exports}(),n["./icedlib"]=function(){var e={},t={exports:e};return function(){var t,r,i,u,o,f,c,l,a=[].slice;u=o=function(){},i=n("./iced"),e.iced=r=i.runtime,l=function(n,e,t,i){var u,f,c,l,s,d;d=o,l=r.findDeferral(arguments),f=new r.Rendezvous,i[0]=f.id(!0).defer({assign_fn:function(){return function(){return u=a.call(arguments,0)}}(),lineno:17,context:s}),setTimeout(f.id(!1).defer({lineno:18,context:s}),e),function(n){s=new r.Deferrals(n,{parent:l,filename:"src/icedlib.coffee",funcname:"_timeout"}),f.wait(s.defer({assign_fn:function(){return function(){return c=arguments[0]}}(),lineno:19})),s._fulfill()}(function(){return t&&(t[0]=c),n.apply(null,u)})},e.timeout=function(n,e,t){var r;return r=[],l(n,e,t,r),r[0]},f=function(n,e,t){var i,u,f,c;c=o,u=r.findDeferral(arguments),function(n){f=new r.Deferrals(n,{parent:u,filename:"src/icedlib.coffee",funcname:"_iand"}),t[0]=f.defer({assign_fn:function(){return function(){return i=arguments[0]}}(),lineno:34}),f._fulfill()}(function(){return i||(e[0]=!1),n()})},e.iand=function(n,e){var t;return t=[],f(n,e,t),t[0]},c=function(n,e,t){var i,u,f,c;c=o,u=r.findDeferral(arguments),function(n){f=new r.Deferrals(n,{parent:u,filename:"src/icedlib.coffee",funcname:"_ior"}),t[0]=f.defer({assign_fn:function(){return function(){return i=arguments[0]}}(),lineno:51}),f._fulfill()}(function(){return i&&(e[0]=!0),n()})},e.ior=function(n,e){var t;return t=[],c(n,e,t),t[0]},e.Pipeliner=t=function(){function n(n,e){this.window=n||1,this.delay=e||0,this.queue=[],this.n_out=0,this.cb=null,this[i["const"].deferrals]=this,this.defer=this._defer}return n.prototype.waitInQueue=function(n){var e,t,i,u=this;i=o,e=r.findDeferral(arguments),function(n){var i,o;i=[],o=function(n){var f,c,l;return f=function(){return n(i)},c=function(){return r.trampoline(function(){return o(n)})},l=function(n){return i.push(n),c()},u.n_out>=u.window?(!function(n){t=new r.Deferrals(n,{parent:e,filename:"src/icedlib.coffee",funcname:"Pipeliner.waitInQueue"}),u.cb=t.defer({lineno:88}),t._fulfill()}(l),void 0):f()},o(n)}(function(){u.n_out++,function(n){return u.delay?(!function(n){t=new r.Deferrals(n,{parent:e,filename:"src/icedlib.coffee",funcname:"Pipeliner.waitInQueue"}),setTimeout(t.defer({lineno:96}),u.delay),t._fulfill()}(n),void 0):n()}(function(){return n()})})},n.prototype.__defer=function(n,e){var t,i,u,f,c,l=this;c=o,u=r.findDeferral(arguments),function(t){f=new r.Deferrals(t,{parent:u,filename:"src/icedlib.coffee",funcname:"Pipeliner.__defer"}),i=f.defer({lineno:109}),n[0]=function(){var n,t;return n=1<=arguments.length?a.call(arguments,0):[],null!=(t=e.assign_fn)&&t.apply(null,n),i()},f._fulfill()}(function(){return l.n_out--,l.cb?(t=l.cb,l.cb=null,t()):void 0})},n.prototype._defer=function(n){var e;return e=[],this.__defer(e,n),e[0]},n.prototype.flush=function(n){var e,t,i,u,o,f=this;i=n,e=r.findDeferral(arguments),u=[],o=function(n){var i,c,l;return i=function(){return n(u)},c=function(){return r.trampoline(function(){return o(n)})},l=function(n){return u.push(n),c()},f.n_out?(!function(n){t=new r.Deferrals(n,{parent:e,filename:"src/icedlib.coffee",funcname:"Pipeliner.flush"}),f.cb=t.defer({lineno:136}),t._fulfill()}(l),void 0):i()},o(i)},n}()}.call(this),t.exports}(),n["./icedlib"]}();"function"==typeof define&&define.amd?(define(function(){return e}),define(function(){return e.iced})):(n.icedlib=e,n.iced=e.iced)}(this);